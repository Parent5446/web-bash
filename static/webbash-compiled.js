function k(a){return function(){return a}}
(function(a){a.Event.prototype.k=function(){var a={1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")",",":"<",".":">","/":"?",";":":","'":'"',"[":"{","]":"}","\\":"|","`":"~","-":"_","=":"+"},c={96:48,97:49,98:50,99:51,100:52,101:53,102:54,103:55,104:56,105:57,106:42,107:43,109:45,110:46,111:47,186:59,187:61,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39},d=this.which;if(0<=[16,37,38,39,40,20,17,18,91].indexOf(d))return!1;"undefined"!==typeof c[d]&&(d=c[d]);c=String.fromCharCode(d);
this.shiftKey?"undefined"!==typeof a[c]&&(c=a[c]):c=c.toLowerCase();return c}})(jQuery);window.Terminal=function(){this.h=null;this.prompt="root@ubuntu> ";this.b=[];this.c=0;this.n=function(){$("#cursor").remove();$("body > ul > li:last-child").append($('<div id="cursor" class="userinput">&nbsp;</div>'));$("#cursor").before($('<div class="userinput"></div>'));$("#cursor").after($('<div class="userinput"></div>'))};this.g=function(){$("body > ul").append("<li>"+this.prompt+"</li>");this.n()};this.e=function(a){a=$.trim(a);$("body > ul > li:last-child").append($('<div class="system_output"></div>'));
for(var b=$(".system_output").last(),c="",d=[],f=!1,e=!1,g=!1,h=0;h<a.length;h++)" "===a[h]&&(f||e)?c+=a[h]:" "!==a[h]||f||e?"\\"===a[h]?g?c+="\\":g=!0:"'"===a[h]?g?(c+="'",g=!1):e?c+="'":f=f?!1:!0:'"'===a[h]?g?(c+='"',g=!1):f?c+='"':e=e?!1:!0:"$"===a[h]&&(f||e)?c+="\\$":(c+=a[h],g=!1):0<c.length&&(d.push(c),c="");c=$.trim(c);""!==c&&d.push(c);this.h.e(d,b)};this.blink=function(){$("#cursor").toggleClass("blink")};this.j=function(){var a=$("#cursor"),b,c,d=a.prev(),f=a.next();if(0===d.length||!d.hasClass("userinput"))return!1;
var e=d.text();if(0===e.length)return!1;b=e.substr(e.length-1);c=a.text();0===f.length&&"&nbsp;"!==c&&(f=$('<div class="userinput"></div>'),a.after(f));d.text(e.substring(0,e.length-1));a.text(b);return"&nbsp;"!==c?(f.prepend(c),!0):!1};this.f=function(){var a=$("#cursor"),b,c,d,f=a.prev(),e=a.next();if(0===e.length||!e.hasClass("userinput"))return!1;d=e.text();if(0===d.length)return!1;b=d[0];c=a.text();if(0===e.length)return a.html("&nbsp;"),!1;e.text(d.substr(1));a.text(b);f.append(c);return!0};
this.i=function(a){var b=$("#cursor").parent().children(".userinput").text();this.b[this.c]=b.substr(0,b.length-1);a=this.c+a;a<this.b.length&&0<=a&&(this.c=a,a=$("#cursor"),a.next().text(""),a.html("&nbsp;"),a.prev().text(this.b[this.c]))};this.l=function(a){var b;if(37===a.which)this.j();else if(39===a.which)this.f();else if(38===a.which)this.i(-1);else if(40===a.which)this.i(1);else if(35===a.which)for(;this.f(););else if(36===a.which)for(;this.j(););else if(!a.ctrlKey||a.metaKey||a.shiftKey||
67!==a.which)if(46===a.which)if(b=$("#cursor"),a=b.next(),0!==a.length&&a.hasClass("userinput")){var c=a.text();0!==c.length?(b.text(c.substr(0,1)),a.text(c.substr(1))):b.html("&nbsp;")}else b.html("&nbsp;");else 8===a.which?(a.preventDefault(),b=$("#cursor").prev(),0<b.length&&b.hasClass("userinput")&&b.text(b.text().slice(0,-1))):13===a.which?(b=$("#cursor").parent().children(".userinput").text(),b=b.substr(0,b.length-1),0<b.length&&(this.b[this.b.length]=b,this.c=this.b.length),$("#cursor").prev().append($("#cursor").text()),
$("#cursor").next().after($(" <br> ")),this.e(b),this.g()):222===a.which&&a.shiftKey?(a.preventDefault(),b=$("#cursor").prev(),b.append('"'),this.f()):222===a.which?(a.preventDefault(),b=$("#cursor").prev(),b.append("'"),this.f()):(b=$("#cursor").prev(),(a=a.k())&&b.append(a));else a.preventDefault(),$("#cursor").next().append("^C"),this.g();$(window).scrollTop($(document).height())};this.bind=function(a,b){this.h=b;var c=$(a.document);c.keydown($.proxy(this.l,this));c.ready($.proxy(function(){this.g();
a.setInterval(this.blink,500)},this))}};function m(){this.a={"?":"0"};this.o=/[\w\?\-\!]+/i;this.e=function(a,b){var c=a[0];a=this.m(a);this.a.p=a[a.length-1];if("eval"===a[0])a.shift(),0<a.length?this.e(a,b):this.a["?"]="0";else if("help"===a[0])b.append("Web-Bash implements a command line interface just like BASH on linux. Type a command like 'date' to test it out. "),b.append("To see a full list of commands, type 'commands' "),this.a["?"]="0";else if("echo"===a[0])a.shift(),b.append(a.join(" ")),this.a["?"]="0";else if("export"===a[0]){for(c=
1;c<a.length;++c){var d=a[c].split("=",2);this.a[d[0]]=d[1]}this.a["?"]="0"}else if("unset"===a[0]){for(c=1;c<a.length;++c)this.a[a[c]]="";this.a["?"]="0"}else"undefined"!==typeof m.commands[a[0]]?(d=[new p,new p,new p],d[1].flush=function(a){b.append(a)},d[2].flush=function(a){b.append(a)},this.a["?"]=m.commands[c](d,a.length,a,this.a).toString()):void 0!==a[0]&&""!==a[0]&&(b.append("error: unknown command "+a[0]),this.a["?"]="127")};this.m=function(a){for(var b=1;b<a.length;++b)for(var c=a[b].indexOf("$");0<=
c;c=a[b].indexOf("$",c+1))if(0!==c&&"\\"===a[b][c-1])a[b]=a[b].substr(0,c-1)+a[b].substr(c);else{var d=this.o.exec(a[b].substr(c+1))[0];null!==d&&("undefined"===typeof this.a[d]&&(this.a[d]=""),a[b]=a[b].substr(0,c)+this.a[d]+a[b].substr(c+d.length+1))}return a}}m.commands={};window.WebBash=m;function p(){this.d=0;this.buffer="";this.write=function(a){this.buffer+=a;this.flush(this.buffer)};this.r=function(a){if(this.d>=this.buffer.length)return!1;if(void 0===a)return this.d=this.buffer.length,this.q;var b=this.buffer.substr(this.d,a);this.d+=a;return b};this.flush=function(){}};(function(a,b){b.commands["false"]=k(1);b.commands["true"]=k(0);b.commands.commands=function(a){var d=[],f;for(f in b.commands)b.commands.hasOwnProperty(f)&&d.push(f);a[1].write(d.join("<br/>"));return 0};b.commands.date=function(a,b){if(1<b)return a[2].write("error: date takes no args"),1;var f=new Date,e=Array(7);e[0]="Sun";e[1]="Mon";e[2]="Tue";e[3]="Wed";e[4]="Thu";e[5]="Fri";e[6]="Sat";var g=Array(12);g[0]="Jan";g[1]="Feb";g[2]="Mar";g[3]="Apr";g[4]="May";g[5]="Jun";g[6]="Jul";g[7]="Aug";g[8]=
"Sep";g[9]="Oct";g[10]="Nov";g[11]="Dec";var h="UTC";4===f.getTimezoneOffset()/60&&(h="EDT");var e=e[f.getDay()].toString()+" "+g[f.getMonth()].toString()+" "+f.getDate().toString()+" ",n=f.getHours(),g=n.toString();10>n&&(g="0"+n.toString());var l=f.getMinutes(),n=l.toString();10>l&&(n="0"+l.toString());var l=f.getSeconds(),q=l.toString();10>l&&(q="0"+l.toString());e+=g+":"+n+":"+q+" "+h+" "+f.getFullYear().toString()+" ";a[1].write(e);return 0}})(jQuery,m);(function(a,b){b.commands.ls=k(0);b.commands.ln=k(0);b.commands.touch=k(0);b.commands.mkdir=k(0);b.commands.cp=k(0);b.commands.mv=k(0);b.commands.rm=k(0);b.commands.chmod=k(0);b.commands.chgrp=k(0);b.commands.chown=k(0)})(jQuery,m);
